<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的十大價值觀探索</title>
    <style>
        /* 設定全域樣式，包含背景顏色、文字顏色等 */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f8f9fa;
            color: #495057;
        }

        /* h1標題樣式 */
        h1 {
            font-size: 30px;  /* 設定字型大小 */
            font-weight: bold; /* 強調主標題 */
            text-align: center;/* 文字置中 */
            line-height: 1.5; /* 調小行距預設1.5，讓標題與說明文字更貼近 */
            margin-bottom: 3px; /* 減少標題與下一行的距離 */
            margin-top: 3px; /* 減少與上一行的距離 */
            color: #343a40; /* 字型 深灰色 */
        }

        /* h2標題樣式 */
        h2 {
            font-size: 22px;  /* 設定字型大小 */
            font-weight: normal; /* 副標題常規字重 */
            text-align: center;/* 文字置中 */
            line-height: 1.5; /* 調小行距預設1.5，讓標題與說明文字更貼近 */
            margin-bottom: 3px; /* 減少標題與下一行的距離 */
            margin-top: 3px; /* 減少與上一行的距離 */
            color: #495057; /* 字型 稍淺的灰色 */
        }


        /* h3 標題樣式 */
        h3 {
            font-size: 18px;   /* 設定字型大小 */
            font-weight: normal; /* 副標題常規字重 */
            color: #007bff;    /* 字型 深藍色 */
            text-align: center;/* 文字置中 */
            margin-bottom: 15px; /* 設定底部間距 */
        }

        /* 卡片容器與選擇區的佈局設定 */
        .card-container, .selected-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* 使卡片置中 */
            gap: 10px;
            margin-bottom: 20px;
        }

        /* 單張卡片的樣式 */
        .card {
            width: 140px;  /* 增加寬度 */
            height: 70px; /* 增加高度 */
            font-size: 22px; /* 提升字體大小 */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background-color: #fff;
        }

        /* 被選中的卡片樣式 */
        .selected-card {
            background-color: #f0f0f0;
        }

        /* 按鈕區塊 */
        .button-container {
            text-align: center;
            margin-top: 20px;
        }

        /* 按鈕基本樣式 */
        .button {
            padding: 10px 20px; /*設定內邊距 上下px 左右px*/
            font-size: 20px; /*字體大小*/
            cursor: pointer;
        }

        /* 已選擇x張 與 已排序x張 的字型大小 */
        #selectedCount {
            font-size: 18px; /* 設置已選擇X張的字型大小 */
        }

        #sortedCount {
            font-size: 18px; /* 設置已排序X張的字型大小 */
        }




        /* 隱藏元素的樣式 */
        .hidden {
            display: none;
        }


        /* 分隔線樣式 */
        .divider {
            border-top: 2px solid #000;
            margin: 20px 0;
            width: 100%;
        }

        /* 頁尾樣式 */
        .footer {
            width: 100%;
            text-align: center;
            background-color: #f8f9fa; /* 淺灰背景 */
            padding: 10px 0;
            font-size: 14px;
            color: #6c757d; /* 灰色文字 */
            margin-top: 20px; /* 給上方留點間距，避免和內容過於擁擠 */
        }
    </style>

</head>
<body>
    <h1>我的十大價值觀探索</h1>
    <h2 id="instruction">請選出你最有感覺的價值觀牌卡</h2>
    <div class="card-container" id="cardContainer"></div>
    <!-- 這裡是加上分隔線 -->
    <div class="divider"></div>
    <!-- 清除暫存資料按鈕 開始-->
    <button class="button" id="clearStorageButton">清除已選牌卡</button>
    <!-- 清除暫存資料按鈕 結束-->
        <div id="selectedCountContainer">
            <span id="selectedCount">已選擇 0 張</span>
        </div>
    <div class="selected-container" id="selectedContainer"></div>
    <div class="button-container">
        <button class="button" id="completeSelectionButton">完成選擇</button>
        <button class="button hidden" id="restartButton">再測驗一次</button>
    </div>

    <!-- 這裡是版權宣告 -->
<footer class="footer">
    <p>&copy; 2025 GCDF全球職涯發展師 莊士勇諮詢師 規劃設計</p>
</footer>

    <script>
        const values = [
             "愛", "獨立", "歡笑", "進步", "樂趣", "友誼", "權力", "影響他人", "關係", "健康",
            "成就", "學習", "憐憫心", "智力", "自尊", "興奮", "經濟自由", "傑出/卓越", "教導", "藝術",
            "熱情", "自然", "傳統", "穩定", "社群", "舒適", "分享", "家人", "專業知識", "幸福",
            "信任", "能力", "服務他人", "旅行", "安全感", "秩序", "喜悅", "領導", "聯繫", "有意義的工作",
            "自我實現", "有效率", "獨處", "休閒活動", "幫助他人", "智慧", "成長", "時間", "創造改變", "選擇",
            "信仰", "冒險", "誠實", "競爭力", "自由", "創新", "和平", "知識", "財務安全", "親密關係",
            "仁慈", "正直", "被認同", "果決", "成功", "誠信", "創造力", "貢獻", "承擔風險", "平衡",
            "歸屬感", "啟發", "社會貢獻", "包容", "自信" 
        ];

        const cardContainer = document.getElementById('cardContainer');
        const selectedContainer = document.getElementById('selectedContainer');
        const completeSelectionButton = document.getElementById('completeSelectionButton');
        const restartButton = document.getElementById('restartButton');
        const selectedCount = document.getElementById('selectedCount');
        const instruction = document.getElementById('instruction');

        let finalSelection = [];
        let sortedSelection = [];
        let isCardSelected = false; // 用來追蹤是否已經選擇過卡片

        // 初始化頁面，從 localStorage 加載選擇
        function loadPreviousSelections() {
            const selectedCards = JSON.parse(localStorage.getItem('selectedCards'));
            if (selectedCards && selectedCards.length > 0) {
                finalSelection = selectedCards;
                finalSelection.forEach(value => {
                    const card = document.createElement('div');
                    card.className = 'card selected-card';
                    card.textContent = value;
                    selectedContainer.appendChild(card);
                });
                updateSelectedCount();
            }
        }


// 當點擊 "清除暫存資料" 按鈕時，清除 localStorage 並重新載入頁面
document.getElementById('clearStorageButton').onclick = () => {
    // 顯示確認提示框
    const confirmClear = confirm("確定要清除已選牌卡嗎？這個操作無法復原。");
    if (confirmClear) {
        localStorage.clear(); // 清除 localStorage 中的所有資料
        location.reload(); // 重新載入頁面
    }
};
//清除暫存資料 按鈕設置結束

        // 初始化牌卡
        function initCards() {
            cardContainer.innerHTML = '';
            values.sort(() => Math.random() - 0.5); // 隨機排列
            values.forEach(value => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = value;
                card.onclick = () => selectCard(card);
                cardContainer.appendChild(card);
            });
            loadPreviousSelections(); // 載入之前選擇的卡片
        }

        // 選擇牌卡
        function selectCard(card) {
            card.classList.add('selected-card');
            selectedContainer.appendChild(card);
            card.onclick = () => deselectCard(card);
            updateSelectedCount();
            isCardSelected = true; // 標記已選擇過卡片
            instruction.textContent = '請選出你最有感覺的價值觀牌卡'; // 恢復原指示文字
            instruction.style.color = ''; // 恢復原顏色
        }

        // 取消選擇牌卡
        function deselectCard(card) {
            card.classList.remove('selected-card');
            cardContainer.appendChild(card);
            card.onclick = () => selectCard(card);
            updateSelectedCount();
        }

        // 更新已選擇牌卡數量
        function updateSelectedCount() {
            const count = selectedContainer.children.length;
            selectedCount.textContent = `已選擇 ${count} 張`;
            const selectedCards = Array.from(selectedContainer.children).map(card => card.textContent);
            localStorage.setItem('selectedCards', JSON.stringify(selectedCards)); // 儲存選擇
        }

        // 完成選擇
        completeSelectionButton.onclick = () => {
            if (selectedContainer.children.length === 0) {
                // 沒有選擇牌卡時顯示提示
                instruction.textContent = '您還沒選擇牌卡喔！';
                instruction.style.color = 'red';
            } else {
                finalSelection = Array.from(selectedContainer.children).map(card => card.textContent);
                showFinalSelection();
            }
        };

        // 顯示最終選擇的牌卡
        function showFinalSelection() {
            document.body.innerHTML = `
                <h1>我的十大價值觀探索</h1>
                <h2>請點選排序你的價值觀牌卡</h2>
                <div class="selected-container" id="finalSelectedContainer"></div>
                <div class="divider"></div>
                    <div id="sortedCountContainer">
                        <span id="sortedCount">已排序 0 張</span>
                    </div>
                <div class="selected-container" id="sortedContainer"></div>
                <div class="button-container">

                    <button class="button" id="finalCompleteButton">完成排序</button>
                    <button class="button hidden" id="restartButton">再測驗一次</button>
                </div>
    <!-- 這裡是版權宣告 -->
<footer class="footer">
    <p>&copy; 2025 GCDF全球職涯發展師 莊士勇諮詢師 規劃設計</p>
</footer>
            `;
            const finalSelectedContainer = document.getElementById('finalSelectedContainer');
            finalSelection.forEach(value => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = value;
                card.onclick = () => selectFinalCard(card);
                finalSelectedContainer.appendChild(card);
            });

            document.getElementById('finalCompleteButton').onclick = showFinalSortedSelection;
        }

        // 選擇最終排序的牌卡
        function selectFinalCard(card) {
            const sortedContainer = document.getElementById('sortedContainer');
            card.classList.add('selected-card');
            sortedContainer.appendChild(card);
            card.onclick = () => deselectFinalCard(card);
            updateSortedCount();
        }

        // 取消選擇最終排序的牌卡
        function deselectFinalCard(card) {
            const finalSelectedContainer = document.getElementById('finalSelectedContainer');
            card.classList.remove('selected-card');
            finalSelectedContainer.appendChild(card);
            card.onclick = () => selectFinalCard(card);
            updateSortedCount();
        }

        // 更新已排序牌卡數量
        function updateSortedCount() {
            const sortedContainer = document.getElementById('sortedContainer');
            const count = sortedContainer.children.length;
            sortedContainer.querySelectorAll('.card').forEach((card, index) => {
                card.textContent = `${index + 1}. ${card.textContent.split('. ')[1] || card.textContent}`;
            });
            document.getElementById('sortedCount').textContent = `已排序 ${count} 張`;
        }

        // 顯示最終排序的牌卡
        function showFinalSortedSelection() {
            const sortedContainer = document.getElementById('sortedContainer');
            document.body.innerHTML = `
                <h1>我的十大價值觀探索</h1>
                <h2>你的價值觀排序結果</h2>
                <div class="selected-container" id="finalSortedContainer"></div>
                <h3>請截圖本頁面，請莊老師為您解讀喔</h2>
                <div class="button-container">
                    <button class="button" id="restartButton">再測驗一次</button>
                </div>
    <!-- 這裡是版權宣告 -->
<footer class="footer">
    <p>&copy; 2025 GCDF全球職涯發展師 莊士勇諮詢師 規劃設計</p>
</footer>

            `;
            const finalSortedContainer = document.getElementById('finalSortedContainer');
            Array.from(sortedContainer.children).forEach(card => {
                const sortedCard = document.createElement('div');
                sortedCard.className = 'card';
                sortedCard.textContent = card.textContent;
                finalSortedContainer.appendChild(sortedCard);
            });

            // 設定 "再測驗一次" 按鈕
            document.getElementById('restartButton').onclick = () => {
                localStorage.clear(); // 清空 localStorage
                location.reload(); // 重新載入頁面
            };
        }

        // 初始化頁面
        initCards();
    </script>

</body>
</html>
